# Краткое описание проекта

В рамках стажировки командой **№2 RoboTech** выполнен стартовый этап работы по разработке нейронной сети для управления роем дронов. В рамках работы определены базовые подходы к разработке, выявлены проблемные области, и возможные точки развития.

Изначально техническое задание на разработку не было конкретно определено, и на начальной стадии команда, проведя исследования, самостоятельно определила для себя кейс и сценарии использования дронов:

- Сектор экономики - сельское хозяйство;
- Выбраны два сценария работы: разведка обстановки на заданной территории, и полив (по необходимости) сельскохозяйственных культур по результатам выполнения предыдущего сценария;
- При запуске сценариев пользователь может произвольно изменять размеры участка, количество дронов в совместной миссии, и количество растений, подлежащих поливу.


**Fig.1  Результаты разработки DS**


![](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/images/DS_results.png)

- Команда погрузилась в предметную область обучения с подкреплением;
- Выбран алгоритм обучения PPO;
- Выбраны ключевые метрики для анализа;
- Минимизированы метрики обучения;
- Проведено тестирование моделей;
- Разработан интерфейс для настройки симуляции.


**Fig.2  Схема организации взаимодействия разработки с развернутой на сервере инфраструктурой**


![](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/images/Interaction.png)

# Этапы работ DevOps

Работа команды носила преимущественно характер НИР, основной объем работ по тестированию и обучению моделей, подходящих библиотек, подбору гиперпараметров велась коллегами DS преимущественно локально, поэтому решение о развертывании стека ПО на предоставленном команде учебном сервере принималось DevOps каждый раз исходя из соображений соответствия текущему статусу исследований. 

С одной стороны не было уверенности в том, что развернутый в данный момент на сервере стек ПО окажется практически востребован командой. С другой стороны, такой режим работы требовал от DevOps постоянно находиться в статусе марафонца на дистанции, выполнять поиск и усваивать большие объёмы информации, выполнять практические эксперименты на оборудовании, сталкиваться с ошибками и исправлять их, что неизбежно способствовало существенной прокачке скиллов. 

Следует заметить, что развернутый DO кластер **Kubernetes** с **JupyterHub**, **Katib**, **TensorBoard** на борту, оказался весьма востребованным на финальной стадии выполнения проекта, и серверные мощности активно использовались членами команды в экспериментах и при автоподборе параметров.

1. Прежде всего DO были  были реализованы мероприятия по обеспечению безопасного доступа на сервер. Пароли пользователей для доступа к серверу сгенерированы и сохранены в файл базы паролей в программе **KeepassXC**. Файл базы паролей сохранен в облачном хранилище. Файл базы паролей пользователей и пароль к нему могут быть переданы Заказчику по запросу с соблюдений необходимых мер предосторожности. Помимо прочих стандартных мер было организовано подключение с использованием [**OpenVPN**](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/Additionally/OpenVPN.md), что позволило обеспечить коллегам безопасный доступ к веб-интерфейсам **Kubeflow**, **Grafana и Prometheus**, и пр.

2. На начальной стадии развития проекта выполнено развертывание инструментов для разработки и мониторинга на основе контейнеров. Описание выполненной работы приведено в папке  [Docker Compose](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/Docker%20Compose).

3. На следующем этапе было принято решение развернуть кластер **Kubernetes**  со всеми необходимыми инструментами, и погрузиться в изучение "внутреннего мира" **k8s, Kubeflow**, вопросов управления ресурсами кластера, авторизации пользователей, резервного копирования и т.п. Информация об использованной методике развертывания кластера приведена в папке [k8s](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/k8s).
4. Информация о настройке резервного копирования приведена здесь: [Timeshift](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/Additionally/Timeshift.md)

5. Информация о настройке VPN соединения находится здесь: [OpenVPN](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/Additionally/OpenVPN.md)


**Fig.3  Схематическое представление текущей конфигурации сервера**


![](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/images/Infrastructure.png)

# Инструменты, не вошедшие в итоговую инфраструктуру
В процесе работы был настроен **CI-CD** процесс для автоматического обучения нейронной сети на сервере с сохранением логов в **PostgreSQL** для последующего их анализа. Так же был настроен сбор метрик **PostgreSQL** и их отображение в  **Grafana**. После развертывания на сервере **k8s** и **Kubeflow** потребность в этих инструментах отпала. 
