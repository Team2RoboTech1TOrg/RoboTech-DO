# Краткое описание проекта

В рамках стажировки командой **№2 RoboTech** выполнен стартовый этап работы по разработке нейронной сети для управления роем дронов. В рамках работы определены базовые подходы к разработке, выявлены проблемные области, и возможные точки развития.

Изначально техническое задание на разработку не было конкретно определено, и на начальной стадии команда, проведя исследования, самостоятельно определила для себя кейс и сценарии использования дронов.

- Сектор экономики - сельское хозяйство;
- Выбраны два сценария работы: разведка обстановки на заданной территории, и полив (по необходимости) сельскохозяйственных культур по результатам выполнения предыдущего сценария;
- При запуске сценариев пользователь может произвольно изменять размеры участка, количество дронов в совместной миссии, и количество растений, подлежащих поливу.

**Результаты разработки DS приведены на следующем изображении**

![](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/images/DS_results.png)

- Команда погрузилась в предметную область обучения с подкреплением;
- Выбран алгоритм обучения PPO;
- Выбраны ключевые метрики для анализа;
- Минимизированы метрики обучения;
- Проведено тестирование моделей;
- Разработан интерфейс для настройки симуляции.

**Взаимодействие с развернутой на сервере инфраструктурой можно проиллюстрировать следующим образом**

![](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/images/Interaction.png)

# Этапы работ DevOps

Работа команды носила преимущественно характер НИР, основной объем работ по тестированию и обучению моделей, подходящих библиотек, подбору гиперпараметров велась коллегами DS преимущественно локально, поэтому решение о развертывании стека ПО на предоставленном команде учебном сервере принималось DevOps каждый раз исходя из соображений соответствия текущему статусу исследований, но без уверенности в том, что развернутый стек окажется практически востребован.

Следует заметить, что развернутый DO кластер **Kubernetes** с **JupyterHub**, **Katib**, **TensorBoard** на борту, оказался весьма востребованным на финальной стадии выполнения проекта, и серверные мощности активно использовались членами команды в экспериментах и при автоподборе параметров.

1. Прежде всего DO были  были реализованы мероприятия по обеспечению безопасного доступа на сервер, для чего помимо прочих стандартных мер, было организовано подключение с использованием **OpenVPN**, что позволило обеспечить коллегам безопасный доступ к веб-интерфейсам **Kubeflow**, **Grafana и Prometheus**, и пр.

2. На начальной стадии развития проекта выполнено развертывание инструментов для разработки и мониторинга на основе контейнеров. Описание выполненной работы приведено в папке  [Docker Compose](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/Docker%20Compose).

3. На следующем этапе было принято решение развернуть кластер **Kubernetes**  со всеми необходимыми инструментами, и погрузиться в изучение "внутреннего мира" **k8s, Kubeflow**, вопросов управления ресурсами кластера, авторизации пользователей, резервного копирования и т.п. Информация об использованной методике развертывания кластера приведена в папке [k8s](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/k8s).
4. Информация о настройке резервного копирования приведена здесь: [Timeshift](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/Additionally/Timeshift.md)

5. Информация о настройке VPN соединения здесь: [OpenVPN](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/tree/main/Additionally/OpenVPN.md)

**Схематически текущая конфигурация сервера проиллюстрирована на изображении ниже**

![](https://github.com/Team2RoboTech1TOrg/RoboTech-DO/blob/main/images/Infrastructure.png)

# Инструменты не вошедшие в итоговую инфраструктуру
В процесе работы был настроен **CICD** процесс для автоматического обучения нейронной сети на сервере, с сохранением логов в **postgresql** для последующего анализа. Так жеб настроен сбор метрик **postgresql** и их отображение в  **Grafana**. Когда мы перешли в k8s и kubeflow надобность в этом отпала. 
